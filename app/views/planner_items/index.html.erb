<div class="page-header">
  <h1>ðŸ“‹ Daily Planner</h1>
  <div class="date-nav">
    <%= link_to "< Prev", planner_items_path(date: (@date - 1.day).to_s), class: "btn btn-secondary" %>
    <span class="current-date"><%= @date.strftime("%A, %B %d, %Y") %></span>
    <%= link_to "Next >", planner_items_path(date: (@date + 1.day).to_s), class: "btn btn-secondary" %>
  </div>
  <%= link_to "+ New Task", new_planner_item_path(date: @date), class: "btn btn-primary" %>
</div>

<% if @planner_items.any? %>
  <div class="items-list">
    <% @planner_items.each do |item| %>
      <div class="item-card <%= 'item-completed' if item.completed %>">
        <div class="item-header">
          <h3><%= item.title %></h3>
          <% if item.time_of_day %>
            <span class="time-badge"><%= item.time_of_day.strftime("%I:%M %p") %></span>
          <% end %>
        </div>
        <% if item.notes.present? %>
          <p class="item-notes"><%= item.notes %></p>
        <% end %>
        <div class="item-actions">
          <%= link_to "Edit", edit_planner_item_path(item), class: "btn btn-sm btn-secondary" %>
          <%= link_to "Delete", planner_item_path(item), data: { turbo_method: :delete, turbo_confirm: "Delete this task?" }, class: "btn btn-sm btn-danger" %>
          <% unless item.completed %>
            <%= link_to "âœ“ Mark Done", planner_item_path(item, planner_item: { completed: true }), data: { turbo_method: :patch }, class: "btn btn-sm btn-success" %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="empty-state-box">
    <p>No tasks for this day.</p>
    <%= link_to "+ Add a Task", new_planner_item_path(date: @date), class: "btn btn-primary" %>
  </div>
<% end %>
